When turning on your computer, you might wonder what takes place during the initial start-up process. As it turns out, quite a bit is happening in the background and usually this is the order of what takes place:

1. Essential hardware components like the processor, memory, and storage are checked to be functioning properly through a self-diagnostic process called Power-On Self-Test (POST).
After the POST, the Unified Extensible Firmware Interface (UEFI) is initialized. This firmware interface provides low-level control over the computer's hardware.
2. The UEFI locates the boot loader, which is a small program stored in the EFI System Partition. The boot loader is responsible for loading the operating system into memory.
3. The boot loader loads the necessary files of the operating system into the computer's memory (RAM). For Linux, it could be GRUB or another boot loader.
4. The operating system detects and initializes hardware devices, including peripherals like keyboard, mouse, and storage devices. Device drivers are loaded to facilitate communication between the operating system and hardware.
5. After that users authenticate through a login interface, leading to the initiation of their chosen desktop environment. Subsequently, configured applications and services specific to the user are launched.

Now the above steps describe what the situation would be like when loading a modern closed, proprietary, operating system, such as Windows or macOS. Worth mentioning is a secure boot process which takes place between steps 2-4. The secure boot configuration, which lies from within the UEFI firmware, includes a set of public keys corresponding to trusted entities. These entities typically include the platform manufacturer and other key signing authorities. UEFI firmware maintains a set of variables, including the secure boot key and the Signature Database. The secure boot key is a root key that signs the certificates in the signature database. These certificates correspond to the keys of trusted entities. The bootloader must be signed with a key recognized by the UEFI firmware which verifies the digital signature of the bootloader using the public key stored in the secure boot key. If the signature is valid, the bootloader is allowed to execute. Once the bootloader is verified, it is executed. The bootloader, in turn, may load the operating system kernel or additional components. Each loaded component is verified before execution. The UEFI firmware continues to verify each component of the boot process, including the operating system kernel and any device drivers. Each component must be signed with a recognized key. The Secure Boot process creates a chain of trust, where each step in the boot sequence verifies the integrity and authenticity of the next step. This ensures that only signed and trusted code is executed. If any component fails verification, secure boot can be configured to take specific actions, such as displaying a warning or preventing the system from booting. The exact policy depends on the platform and user settings.

This now begs the question: Having already mentioned security boot what other security features are we talking about? Well although there exists a form of secure bot for NixOS in the form of Lanzaboote, it requires one to enable it from inside the operating system after installation leaving one susceptible to attacks upon the first boot. Additionally, while secure boot is designed to prevent the loading of unauthorised or maliciously altered operating system loaders and kernels during the boot process, there are still other attacks that are possible and thus there is a need for greater security. 

Moreover, it is often the case that secure boot story is not so straightforward for many Linux distributions mainly for the following three reasons: 

Secure Boot requires that the bootloader (e.g., GRUB or Shim) and the kernel are signed with cryptographic keys recognized by the system's UEFI firmware. Many Linux distributions provide unsigned versions of these components, which may not be compatible with Secure Boot.
Some UEFI firmware implementations only include Microsoft's signing key by default. This means that only bootloaders and kernels signed with Microsoft's key will be allowed to run in Secure Boot mode. Linux distributions often use their own keys, which may not be present in all systems.
While major Linux distributions, like Ubuntu and Fedora, have made efforts to support Secure Boot by signing their bootloaders with Microsoft's key, there could still be variations across distributions. Some smaller or specialized distributions may not have taken these steps.

The last point in particular is the intended goal of this project which is to realise increased security in the boot process for the NixOS operating system that also is done in a manner that also takes into consideration the above steps of 2 and 3. 


