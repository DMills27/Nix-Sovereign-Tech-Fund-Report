Relevant PR
- [[WIP] nixos/systemd-boot: boot counting and automatic fallback #84204](https://github.com/NixOS/nixpkgs/pull/84204)

The A/B schema is, in the context of booting, refers to general methodologies facilitating primary and secondary booting. Commonly found in devices such as phones and Chromebooks, this schema involves the existence of two distinct boot partitions. During an upgrade, the updated content is written to the primary partition. In the event of a boot failure, the system automatically switches to the secondary partition, executing a rollback of the unsuccessful update. This conventional approach safeguards embedded systems from disruptions during upgrades by maintaining two separate boot partitions that are not simultaneously upgraded. Within NixOS and systemd-boot, a mechanism has been implemented that leverages the NixOS generation system to monitor boot occurrences and initiate automatic fallbacks. While not directly related to boot security, this feature is integral to the autonomy of systems on NixOS, impacting both boot functionality and overall security. Its presence is crucial, as it significantly influences users' willingness to engage in boot processes and system upgrades.
